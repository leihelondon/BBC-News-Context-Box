define(["jquery-1"],function(a){return{init:function(){var e,l,c=null;function h(){a(".dropdown-list").each(function(){a(this).css("display","none")});a(".dropdown").unbind("click")}function b(o){a(".emp object").each(function(t,s){var r=a(this).children("embed"),q=this.attributes,w="<OBJECT ",u=0,p=false;if(typeof(r.get(0))!=="undefined"){if(typeof(r.get(0).outerHTML)!=="undefined"){r.attr("wmode",o);a(this.outerHTML).insertAfter(this);a(this).remove()}return true}for(u=0;u<q.length;u++){w+=q[u].name+'="'+q[u].value+'" '}w+=">";a(this).children().each(function(v){if(this.nodeName==="PARAM"){if(this.name==="wmode"){p=true;w+='<PARAM NAME="'+this.name+'" VALUE="'+o+'">'}else{w+='<PARAM NAME="'+this.name+'" VALUE="'+this.value+'">'}}});if(!p){w+='<PARAM NAME="wmode" VALUE="'+o+'">'}w+="</OBJECT>";a(w).insertAfter(this);a(this).remove()})}function f(){var o=a(".dropdown-list");o.hide();a(".dropdown").removeClass("clicked");o.attr("aria-hidden","true");o.die("hover")}function m(o){f();o.fadeIn(100);o.parent().addClass("clicked");o.attr("aria-hidden","false");o.find("ul a:first").focus();o.hover(function(){o.find("ul a").blur()})}function k(){a(".dropdown-list").fadeOut(100);f()}function d(){a(".switch-emp span").html("Use dynamic player and flyout menus")}function g(){a(".switch-emp span").html("Use accessible player and disable flyout menus")}function n(p){var o=embeddedMedia.playerInstances[p];if(!c){o.setWmode("window");o.set("config_settings_autoPlay","true");o.writeEmp()}else{o.call("play")}}function j(){a(".dropdown-list").each(function(){a(this).removeAttr("style")});a(".dropdown").click(function(p){var o,q;o=a(p.target);if(o.is("a")&&(o.parent().hasClass("heading"))){q=a(this).find(" .dropdown-list");if(q.css("display")!=="block"){m(q)}else{k()}return false}return false});a("body").click(function(){k()})}function i(){a(".switch-emp").each(function(o){a(this).click(function(q){q.preventDefault();var p=a(this).parent().children(".emp").attr("id");if(c===null){c=(a(this).text()==="Play media")?false:true}if(!c){n(p)}else{if(l===true){h();b("auto");d();n(p);l=false}else{j();b("transparent");g();l=true}}})})}a(function(){e=a(".emp-no-switch");e.each(function(o){var q=a(this).find('param[name="config_settings_autoPlay"]').attr("value")==="true",p=(q)?"Use accessible player and disable flyout menus":"Play media";a(this).prepend('<a class="switch-emp blq-hide" href="#"><span>'+p+"</span></a>")});l=true;e.removeClass("emp-no-switch");i()})}}});